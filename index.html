<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width = device-width, initial-scale = 1.0" />
    <title>Buscador de Servants - F/GO Dashboard</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap");
    </style>

    <!-- CSS Modular: Variables > Reset > Componentes -->
    <link rel="stylesheet" href="static/css/variables.css" />
    <link rel="stylesheet" href="static/css/reset.css" />
    <link rel="stylesheet" href="static/css/components/sidebar.css" />
    <link rel="stylesheet" href="static/css/components/cards.css" />
    <link rel="stylesheet" href="static/css/components/auth.css" />

    <link rel="icon" href="static/icons/base-page/favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="icon"
      href="static/icons/base-page/favicon.svg"
      type="image/svg+xml"
    />
    <link
      rel="apple-touch-icon"
      href="static/icons/base-page/apple-touch-icon.png"
    />
    <link rel="manifest" href="static/icons/base-page/site.webmanifest" />
  </head>

  <body>
    <header>
      <h1>FGO Dashboard</h1>
    </header>

    <main class="main_container index_page">
      <!-- Barra de búsqueda y filtros -->
      <div class="search_bar">
        <input
          type="text"
          id="search-bar"
          class="search_input"
          placeholder="Buscar Servant..."
        />
        <button id="button-filter" class="filter_button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-sliders-horizontal"
          >
            <line x1="21" y1="4" x2="14" y2="4"></line>
            <line x1="10" y1="4" x2="3" y2="4"></line>
            <line x1="21" y1="12" x2="12" y2="12"></line>
            <line x1="8" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="20" x2="16" y2="20"></line>
            <line x1="12" y1="20" x2="3" y2="20"></line>
            <line x1="14" y1="2" x2="14" y2="6"></line>
            <line x1="8" y1="10" x2="8" y2="14"></line>
            <line x1="16" y1="18" x2="16" y2="22"></line>
          </svg>
          <span>Filtrar</span>
        </button>
      </div>

      <!-- Contenedor limpio para renderizado JS -->
      <div class="servants_grid" id="servants-container">
        <p class="loading_message">Consultando a Chaldea...</p>
      </div>
    </main>

    <!-- Sidebar de filtros (oculto por defecto) -->
    <aside id="sidebar-filtro">
      <h4>Filtros</h4>
      <hr />
      <div class="filtro_rarity">
        <button id="rarity-0" data-value="0">★</button>
        <button id="rarity-1" data-value="1">★</button>
        <button id="rarity-2" data-value="2">★★</button>
        <button id="rarity-3" data-value="3">★★★</button>
        <button id="rarity-4" data-value="4">★★★★</button>
        <button id="rarity-5" data-value="5">★★★★★</button>
      </div>
      <hr />
      <div class="filtro_class">
        <button id="class-saber" data-value="saber">
          <img
            src="static/classes/saber.png"
            alt="Icono Saber"
            class="filter_icon"
          />
          <span>Saber</span>
        </button>
        <button id="class-archer" data-value="archer">
          <img
            src="static/classes/archer.png"
            alt="Icono Archer"
            class="filter_icon"
          />
          <span>Archer</span>
        </button>
        <button id="class-lancer" data-value="lancer">
          <img
            src="static/classes/lancer.png"
            alt="Icono Lancer"
            class="filter_icon"
          />
          <span>Lancer</span>
        </button>
        <button id="class-rider" data-value="rider">
          <img
            src="static/classes/rider.png"
            alt="Icono Rider"
            class="filter_icon"
          />
          <span>Rider</span>
        </button>
        <button id="class-caster" data-value="caster">
          <img
            src="static/classes/caster.png"
            alt="Icono Caster"
            class="filter_icon"
          />
          <span>Caster</span>
        </button>
        <button id="class-assassin" data-value="assassin">
          <img
            src="static/classes/assassin.png"
            alt="Icono Assassin"
            class="filter_icon"
          />
          <span>Assassin</span>
        </button>
        <button id="class-berserker" data-value="berserker">
          <img
            src="static/classes/berserker.png"
            alt="Icono Berserker"
            class="filter_icon"
          />
          <span>Berserker</span>
        </button>
        <button id="class-shielder" data-value="shielder">
          <img
            src="static/classes/shielder.png"
            alt="Icono Shielder"
            class="filter_icon"
          />
          <span>Shielder</span>
        </button>
        <button id="class-ruler" data-value="ruler">
          <img
            src="static/classes/ruler.png"
            alt="Icono Ruler"
            class="filter_icon"
          />
          <span>Ruler</span>
        </button>
        <button id="class-alterEgo" data-value="alterEgo">
          <img
            src="static/classes/alterego.png"
            alt="Icono Alter Ego"
            class="filter_icon"
          />
          <span>Alter Ego</span>
        </button>
        <button id="class-avenger" data-value="avenger">
          <img
            src="static/classes/avenger.png"
            alt="Icono Avenger"
            class="filter_icon"
          />
          <span>Avenger</span>
        </button>
        <button id="class-foreigner" data-value="foreigner">
          <img
            src="static/classes/foreigner.png"
            alt="Icono Foreigner"
            class="filter_icon"
          />
          <span>Foreigner</span>
        </button>
        <button id="class-beast" data-value="beast">
          <img
            src="static/classes/beast.png"
            alt="Icono Beast"
            class="filter_icon"
          />
          <span>Beast</span>
        </button>
        <button id="class-pretender" data-value="pretender">
          <img
            src="static/classes/pretender.png"
            alt="Icono Pretender"
            class="filter_icon"
          />
          <span>Pretender</span>
        </button>
        <button id="class-moonCancer" data-value="moonCancer">
          <img
            src="static/classes/mooncancer.png"
            alt="Icono Moon Cancer"
            class="filter_icon"
          />
          <span>Moon Cancer</span>
        </button>
      </div>
      <hr />
      <div class="filtro_NP">
        <button id="NP-Arts" data-value="1">
          <span>Arts</span>
        </button>
        <button id="NP-Quick" data-value="3">
          <span>Quick</span>
        </button>
        <button id="NP-Buster" data-value="2">
          <span>Buster</span>
        </button>
      </div>
      <hr />
      <div class="reset_filter">
        <button id="reset-filter"><span>Reiniciar Filtros</span></button>
      </div>
    </aside>

    <!-- ================================================
         SCRIPTS GLOBALES
         ================================================ -->

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- OK FASE 4: Inicializar Supabase con ES Module -->
    <script type="module">
      import { CONFIG } from "./static/js/config.js";

      // Crear cliente global de Supabase
      window.clienteSupabase = supabase.createClient(
        CONFIG.SUPABASE_URL,
        CONFIG.SUPABASE_ANON_KEY
      );
    </script>

    <!-- Script principal -->
    <script type="module" src="./static/main.js"></script>
  </body>
</html>
